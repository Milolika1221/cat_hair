РЕЗУЛЬТАТ ТЕСТА 

❯ /home/k/dev/Cat/.venv/bin/python /home/k/dev/Cat/test/test_database.py
2025-10-12 14:19:04,321 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-10-12 14:19:04,321 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-12 14:19:04,322 INFO sqlalchemy.engine.Engine select current_schema()
2025-10-12 14:19:04,322 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-12 14:19:04,323 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-10-12 14:19:04,323 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-12 14:19:04,324 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-12 14:19:04,326 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-10-12 14:19:04,326 INFO sqlalchemy.engine.Engine [generated in 0.00010s] ('Cats', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-10-12 14:19:04,327 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-10-12 14:19:04,327 INFO sqlalchemy.engine.Engine [cached since 0.001755s ago] ('Haircuts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-10-12 14:19:04,328 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-10-12 14:19:04,328 INFO sqlalchemy.engine.Engine [cached since 0.002131s ago] ('CatImages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-10-12 14:19:04,328 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-10-12 14:19:04,328 INFO sqlalchemy.engine.Engine [cached since 0.002527s ago] ('CatCharacteristics', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-10-12 14:19:04,329 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-10-12 14:19:04,329 INFO sqlalchemy.engine.Engine [cached since 0.002878s ago] ('Recommendations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-10-12 14:19:04,329 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-10-12 14:19:04,329 INFO sqlalchemy.engine.Engine [cached since 0.003171s ago] ('ProcessingLogs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-10-12 14:19:04,329 INFO sqlalchemy.engine.Engine 
CREATE TABLE "Cats" (
        "CatID" SERIAL NOT NULL, 
        "UserID" VARCHAR, 
        "CreatedAt" TIMESTAMP WITHOUT TIME ZONE, 
        PRIMARY KEY ("CatID")
)


2025-10-12 14:19:04,330 INFO sqlalchemy.engine.Engine [no key 0.00005s] ()
2025-10-12 14:19:04,333 INFO sqlalchemy.engine.Engine 
CREATE TABLE "Haircuts" (
        "HaircutID" SERIAL NOT NULL, 
        "Name" VARCHAR, 
        "Description" VARCHAR, 
        "SuitableBodyTypes" VARCHAR, 
        "SuitableColors" VARCHAR, 
        "SuitableHairLengths" VARCHAR, 
        PRIMARY KEY ("HaircutID")
)


2025-10-12 14:19:04,333 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
2025-10-12 14:19:04,336 INFO sqlalchemy.engine.Engine 
CREATE TABLE "CatImages" (
        "CatImageID" SERIAL NOT NULL, 
        "CatID" INTEGER NOT NULL, 
        "FilePath" VARCHAR NOT NULL, 
        "FileSize" VARCHAR, 
        "Resolution" VARCHAR, 
        "Format" VARCHAR, 
        "UploadedAt" TIMESTAMP WITHOUT TIME ZONE, 
        PRIMARY KEY ("CatImageID"), 
        FOREIGN KEY("CatID") REFERENCES "Cats" ("CatID")
)


2025-10-12 14:19:04,336 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
2025-10-12 14:19:04,339 INFO sqlalchemy.engine.Engine 
CREATE TABLE "CatCharacteristics" (
        "CharacteristicID" SERIAL NOT NULL, 
        "CatID" INTEGER NOT NULL, 
        "Color" VARCHAR, 
        "BodyType" VARCHAR, 
        "HairLength" VARCHAR, 
        "ConfidenceLevel" FLOAT, 
        PRIMARY KEY ("CharacteristicID"), 
        FOREIGN KEY("CatID") REFERENCES "Cats" ("CatID")
)


2025-10-12 14:19:04,339 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
2025-10-12 14:19:04,341 INFO sqlalchemy.engine.Engine 
CREATE TABLE "Recommendations" (
        "RecommendationID" SERIAL NOT NULL, 
        "CatID" INTEGER NOT NULL, 
        "HaircutID" INTEGER NOT NULL, 
        "IsNoHaircutRequired" BOOLEAN, 
        "Reason" VARCHAR, 
        "CreatedAt" TIMESTAMP WITHOUT TIME ZONE, 
        PRIMARY KEY ("RecommendationID"), 
        FOREIGN KEY("CatID") REFERENCES "Cats" ("CatID"), 
        FOREIGN KEY("HaircutID") REFERENCES "Haircuts" ("HaircutID")
)


2025-10-12 14:19:04,341 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
2025-10-12 14:19:04,343 INFO sqlalchemy.engine.Engine 
CREATE TABLE "ProcessingLogs" (
        "LogID" SERIAL NOT NULL, 
        "CatID" INTEGER NOT NULL, 
        "ProcessingTime" FLOAT, 
        "Status" VARCHAR, 
        "ErrorMessage" VARCHAR, 
        "ProcessedAt" TIMESTAMP WITHOUT TIME ZONE, 
        PRIMARY KEY ("LogID"), 
        FOREIGN KEY("CatID") REFERENCES "Cats" ("CatID")
)


2025-10-12 14:19:04,344 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
2025-10-12 14:19:04,345 INFO sqlalchemy.engine.Engine COMMIT
успэх
2025-10-12 14:19:04,354 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-12 14:19:04,354 INFO sqlalchemy.engine.Engine INSERT INTO "Cats" ("UserID", "CreatedAt") VALUES ($1::VARCHAR, $2::TIMESTAMP WITHOUT TIME ZONE) RETURNING "Cats"."CatID"
2025-10-12 14:19:04,354 INFO sqlalchemy.engine.Engine [generated in 0.00011s] ('test_id_123', datetime.datetime(2025, 10, 12, 14, 19, 4, 354912))
2025-10-12 14:19:04,356 INFO sqlalchemy.engine.Engine COMMIT
2025-10-12 14:19:04,357 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-12 14:19:04,358 INFO sqlalchemy.engine.Engine SELECT "Cats"."CatID", "Cats"."UserID", "Cats"."CreatedAt" 
FROM "Cats" 
WHERE "Cats"."CatID" = $1::INTEGER
2025-10-12 14:19:04,358 INFO sqlalchemy.engine.Engine [generated in 0.00008s] (1,)
Гатова: ID=1, UserID=test_id_123
2025-10-12 14:19:04,359 INFO sqlalchemy.engine.Engine ROLLBACK
